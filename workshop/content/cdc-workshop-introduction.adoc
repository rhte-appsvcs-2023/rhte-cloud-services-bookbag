== Introduction

This Solution Pattern demonstrates how https://www.redhat.com/en/topics/integration/what-is-change-data-capture[Change Data Capture^] (CDC) and event-driven architectures supports the extension of existing capabilities of applications with no changes to legacy apps. 

The story behind this solution pattern is of a retail store that has been active in the market for more than fifteen years. This retail store uses a single application to manage the `inventory`, `catalog` and `sales` during their daily operations. It's getting hard for this company to compete with more high-tech competitors, but the technical team finds it hard to fully adopt cloud-native technologies to enhance the organization's services because of the limitations of the existing legacy application.

Now, business wants to introduce a new *Cashback Wallet* as an extension to their existing retail system. 

But there are challenges!

=== Challenges faced

* The technology has been acquired many years ago, and no source code is available.
* The application, application server and databases are installed and running in an on premise environment.
* The domain experts knowledge is limited to keeping the inventory and catalog list updated.
* There are operations running 24/7 using the sales application,  and any immediate modernization efforts is risky and could impact their bottom line directly

=== Solution Approach

A recommended approach is to consider adopting an Enterprise Integration Pattern for data integration, more specifically, adopting the Change Data Capture (CDC) pattern. +
Such an approach

* requires no source code changes in the existing services.
* uses an event-driven architecture to support the extension of the legacy stack. 
* architecture includes new microservices, event streaming and event processing tools
* the core concept builds on data integration between legacy and new services through usage of asynchronous events. 


A quick view of solution flow:

* The existing *Retail Application* serves as an Order Placement system for the retail customer. 
- The data generated by this application is stored in the  *Retail Database*. 
- The data typically includes customer, product, inventory, and also sales data produced when orders are placed
* Using Debezium, the *Retail Database* becomes an event stream. Since data changes are directly tracked, the legacy application code won't require any changes.
* The captured data changes are pushed to topics in a Kafka broker by Debezium. 
* New microservices such as *Sales Streams*, *Cashback Service* and the *Cashback Connectors* can now subscribe to the relevant topics. These new services use these events to obtain the information needed to build new functionality

image::images/cdc/cdc-funcationality.png[] 

In the next step, you will implement this solution to introduce  *Cashback Wallet* functionality based on Change Data Capture by using http://debezium.io[debezium^].
